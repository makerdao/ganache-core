var cov_2feit3zr4i=function(){var path="/Users/Tyler/ganache-fork/ganache-core/lib/database.js";var hash="3d748a27e873b0b1a6f1e4875d1bd242955c5253";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/Tyler/ganache-fork/ganache-core/lib/database.js",statementMap:{"0":{start:{line:1,column:26},end:{line:1,column:67}},"1":{start:{line:2,column:27},end:{line:2,column:69}},"2":{start:{line:3,column:14},end:{line:3,column:32}},"3":{start:{line:4,column:13},end:{line:4,column:37}},"4":{start:{line:5,column:15},end:{line:5,column:45}},"5":{start:{line:6,column:16},end:{line:6,column:36}},"6":{start:{line:7,column:19},end:{line:7,column:53}},"7":{start:{line:8,column:22},end:{line:8,column:59}},"8":{start:{line:9,column:23},end:{line:9,column:61}},"9":{start:{line:10,column:26},end:{line:10,column:67}},"10":{start:{line:11,column:24},end:{line:11,column:63}},"11":{start:{line:12,column:10},end:{line:12,column:24}},"12":{start:{line:15,column:2},end:{line:15,column:25}},"13":{start:{line:16,column:2},end:{line:16,column:24}},"14":{start:{line:19,column:0},end:{line:71,column:2}},"15":{start:{line:20,column:13},end:{line:20,column:17}},"16":{start:{line:23,column:4},end:{line:27,column:5}},"17":{start:{line:24,column:6},end:{line:24,column:37}},"18":{start:{line:26,column:6},end:{line:26,column:18}},"19":{start:{line:30,column:2},end:{line:43,column:5}},"20":{start:{line:31,column:4},end:{line:33,column:5}},"21":{start:{line:32,column:6},end:{line:32,column:27}},"22":{start:{line:34,column:27},end:{line:34,column:52}},"23":{start:{line:35,column:4},end:{line:42,column:5}},"24":{start:{line:36,column:20},end:{line:36,column:35}},"25":{start:{line:37,column:6},end:{line:37,column:57}},"26":{start:{line:39,column:6},end:{line:39,column:33}},"27":{start:{line:40,column:20},end:{line:40,column:87}},"28":{start:{line:41,column:6},end:{line:41,column:45}},"29":{start:{line:46,column:4},end:{line:48,column:5}},"30":{start:{line:47,column:6},end:{line:47,column:27}},"31":{start:{line:50,column:4},end:{line:50,column:17}},"32":{start:{line:53,column:4},end:{line:53,column:78}},"33":{start:{line:56,column:4},end:{line:56,column:98}},"34":{start:{line:59,column:4},end:{line:59,column:72}},"35":{start:{line:62,column:4},end:{line:62,column:88}},"36":{start:{line:65,column:4},end:{line:65,column:117}},"37":{start:{line:67,column:4},end:{line:67,column:100}},"38":{start:{line:69,column:4},end:{line:69,column:15}},"39":{start:{line:73,column:0},end:{line:75,column:2}},"40":{start:{line:74,column:2},end:{line:74,column:13}},"41":{start:{line:77,column:0},end:{line:77,column:26}}},fnMap:{"0":{name:"Database",decl:{start:{line:14,column:9},end:{line:14,column:17}},loc:{start:{line:14,column:27},end:{line:17,column:1}},line:14},"1":{name:"(anonymous_1)",decl:{start:{line:19,column:32},end:{line:19,column:33}},loc:{start:{line:19,column:51},end:{line:71,column:1}},line:19},"2":{name:"getDir",decl:{start:{line:22,column:11},end:{line:22,column:17}},loc:{start:{line:22,column:22},end:{line:28,column:3}},line:22},"3":{name:"(anonymous_3)",decl:{start:{line:30,column:9},end:{line:30,column:10}},loc:{start:{line:30,column:34},end:{line:43,column:3}},line:30},"4":{name:"finishInitializing",decl:{start:{line:45,column:11},end:{line:45,column:29}},loc:{start:{line:45,column:39},end:{line:70,column:3}},line:45},"5":{name:"(anonymous_5)",decl:{start:{line:73,column:27},end:{line:73,column:28}},loc:{start:{line:73,column:46},end:{line:75,column:1}},line:73}},branchMap:{"0":{loc:{start:{line:23,column:4},end:{line:27,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:27,column:5}},{start:{line:23,column:4},end:{line:27,column:5}}],line:23},"1":{loc:{start:{line:31,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:31,column:4},end:{line:33,column:5}},{start:{line:31,column:4},end:{line:33,column:5}}],line:31},"2":{loc:{start:{line:35,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:35,column:4},end:{line:42,column:5}},{start:{line:35,column:4},end:{line:42,column:5}}],line:35},"3":{loc:{start:{line:46,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:46,column:4},end:{line:48,column:5}},{start:{line:46,column:4},end:{line:48,column:5}}],line:46}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184",hash:"3d748a27e873b0b1a6f1e4875d1bd242955c5253"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}return coverage[path]=coverageData;}();var LevelUpArrayAdapter=(cov_2feit3zr4i.s[0]++,require("./database/leveluparrayadapter"));var LevelUpObjectAdapter=(cov_2feit3zr4i.s[1]++,require("./database/levelupobjectadapter"));var levelup=(cov_2feit3zr4i.s[2]++,require("levelup"));var encode=(cov_2feit3zr4i.s[3]++,require("encoding-down"));var filedown=(cov_2feit3zr4i.s[4]++,require("./database/filedown"));var cachedown=(cov_2feit3zr4i.s[5]++,require("cachedown"));var txserializer=(cov_2feit3zr4i.s[6]++,require("./database/txserializer"));var blockserializer=(cov_2feit3zr4i.s[7]++,require("./database/blockserializer"));var bufferserializer=(cov_2feit3zr4i.s[8]++,require("./database/bufferserializer"));var BlockLogsSerializer=(cov_2feit3zr4i.s[9]++,require("./database/blocklogsserializer"));var ReceiptSerializer=(cov_2feit3zr4i.s[10]++,require("./database/receiptserializer"));var tmp=(cov_2feit3zr4i.s[11]++,require("tmp"));function Database(options){cov_2feit3zr4i.f[0]++;cov_2feit3zr4i.s[12]++;this.options=options;cov_2feit3zr4i.s[13]++;this.directory=null;}cov_2feit3zr4i.s[14]++;Database.prototype.initialize=function(callback){cov_2feit3zr4i.f[1]++;var self=(cov_2feit3zr4i.s[15]++,this);function getDir(cb){cov_2feit3zr4i.f[2]++;cov_2feit3zr4i.s[16]++;if(self.options.db_path){cov_2feit3zr4i.b[0][0]++;cov_2feit3zr4i.s[17]++;cb(null,self.options.db_path);}else{cov_2feit3zr4i.b[0][1]++;cov_2feit3zr4i.s[18]++;tmp.dir(cb);}}cov_2feit3zr4i.s[19]++;getDir(function(err,directory){cov_2feit3zr4i.f[3]++;cov_2feit3zr4i.s[20]++;if(err){cov_2feit3zr4i.b[1][0]++;cov_2feit3zr4i.s[21]++;return callback(err);}else{cov_2feit3zr4i.b[1][1]++;}const levelupOptions=(cov_2feit3zr4i.s[22]++,{valueEncoding:"json"});cov_2feit3zr4i.s[23]++;if(self.options.db){cov_2feit3zr4i.b[2][0]++;const store=(cov_2feit3zr4i.s[24]++,self.options.db);cov_2feit3zr4i.s[25]++;levelup(store,levelupOptions,finishInitializing);}else{cov_2feit3zr4i.b[2][1]++;cov_2feit3zr4i.s[26]++;self.directory=directory;const store=(cov_2feit3zr4i.s[27]++,encode(cachedown(directory,filedown).maxSize(100),levelupOptions));cov_2feit3zr4i.s[28]++;levelup(store,{},finishInitializing);}});function finishInitializing(err,db){cov_2feit3zr4i.f[4]++;cov_2feit3zr4i.s[29]++;if(err){cov_2feit3zr4i.b[3][0]++;cov_2feit3zr4i.s[30]++;return callback(err);}else{cov_2feit3zr4i.b[3][1]++;}cov_2feit3zr4i.s[31]++;self.db=db;// Blocks, keyed by array index (not necessarily by block number) (0-based)
cov_2feit3zr4i.s[32]++;self.blocks=new LevelUpArrayAdapter("blocks",self.db,blockserializer);// Logs triggered in each block, keyed by block id (ids in the blocks array; not necessarily block number) (0-based)
cov_2feit3zr4i.s[33]++;self.blockLogs=new LevelUpArrayAdapter("blockLogs",self.db,new BlockLogsSerializer(self));// Block hashes -> block ids (ids in the blocks array; not necessarily block number) for quick lookup
cov_2feit3zr4i.s[34]++;self.blockHashes=new LevelUpObjectAdapter("blockHashes",self.db);// Transaction hash -> transaction objects
cov_2feit3zr4i.s[35]++;self.transactions=new LevelUpObjectAdapter("transactions",self.db,txserializer);// Transaction hash -> transaction receipts
cov_2feit3zr4i.s[36]++;self.transactionReceipts=new LevelUpObjectAdapter("transactionReceipts",self.db,new ReceiptSerializer(self));cov_2feit3zr4i.s[37]++;self.trie_db=new LevelUpObjectAdapter("trie_db",self.db,bufferserializer,bufferserializer);cov_2feit3zr4i.s[38]++;callback();}};cov_2feit3zr4i.s[39]++;Database.prototype.close=function(callback){cov_2feit3zr4i.f[5]++;cov_2feit3zr4i.s[40]++;callback();};cov_2feit3zr4i.s[41]++;module.exports=Database;